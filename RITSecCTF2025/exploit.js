const ethers = require("ethers");

// Kết nối RPC của thử thách
const provider = new ethers.JsonRpcProvider("94.237.57.194:35775");

async function findDeployedContracts() {
    const latestBlock = await provider.getBlockNumber();
    console.log(`Scanning latest ${latestBlock} blocks...`);

    for (let i = latestBlock; i > latestBlock - 1000; i--) {  // Quét 1000 block gần nhất
        const block = await provider.getBlockWithTransactions(i);

        for (const tx of block.transactions) {
            if (tx.to === null) {  // Đây là giao dịch deploy contract
                console.log(`Possible contract at TX: ${tx.hash} => Address: ${tx.creates || ethers.getContractAddress({ from: tx.from, nonce: tx.nonce })}`);
            }
        }
    }
}

findDeployedContracts().catch(console.error);
